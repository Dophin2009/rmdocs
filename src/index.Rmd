---
title: Writing Documents* with LaTeX, R, and Rmarkdown
output:
  revealjs::revealjs_presentation:
    center: false
    css:
      - styles.css
    highlight: haddock
    pandoc_args: [ "--filter", "pandoc-include-code" ]
    theme: serif
    transition: fade
---

```{bash, echo = FALSE}
sassc styles.scss styles.css
```

# What is LaTeX?

LaTeX is a document typsetting language and build system based off TeX

-   Turing-complete
-   Powerful control over formatting
-   Define commands and macros
-   Automate citations


# Installing TeX

TeX comes in many different distributions

-   **TeX Live**: the distribution of choice for most \*nix distributions --
    [tug.org/texlive](https://tug.org/texlive/)
    -   Packages available for most Linux distributions
-   **MiKTeX**: used most on Windows; has a Windows installer --
    [miktex.org](https://miktex.org/)
-   **MacTeX**: like TeX Live, but more compatibility with OS X --
    [tug.org/mactex](https://www.tug.org/mactex/)

Full installation might be up to ~6 GB

Install more packages from the CTAN (Comprehensive TeX Archive Network)

-   Use `tlmgr` with TeX Live


# Creating a LaTeX Document {.noscroll}

Here's an example LaTeX document:


```{.latex include=docs/example-latex.tex}
```


# Breaking It Down

`\documentclass[options]{class}` defines the layout standard

-   `options` can set main font size, paper size, and column structure
-   `class` defines standard layout; can be `article`, `report`, `book`,
    `letter`, `beamer`, etc.

`\usepackage[options]{pkgname}` imports a TeX package and exposes it commands
for use

## Document

`\begin{blockname}` begins some block of text and commands

-   `blockname` may be associated with some command or custom definition
-   `\begin{document}` defines where the document actually begins
-   `\begin{titlepage}` declares a page dedicated to the title

`\end{blockname}` ends a block

`\section` defines a new section/chapter/etc. block

## Commands

`\textbf` makes text bold; `\textit` makes text italicized

Changing text size:

-   `\small` makes text small; `\Large`, well, large
-   Some other basic font differences, such as `\large` and `\Huge`

`\blindtext`, provided by the `blindtext` package, produces filler text

These are just a couple basic ones, there are many, many more provided by the
core library and packages


# Making It Useful

There are a number of TeX compilers that should be included in standard TeX
installations.

-   **`latex`** - generates a DVI document, but supports only `.eps` and `.ps`
    image formats
-   **`pdflatex`** - generates a PDF document; supports `.png`, `.jpg`, and
    `.pdf` image formats
-   **`xelatex`** - like `pdflatex`, but with robust Unicode and font support
-   **`lualatex`** - like `xelatex`, but can embed Lua code

----

```{bash, results = 'hide'} 
cd docs
xelatex example-latex.tex     # produces example-latex.pdf
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-latex.pdf" "example-latex" -png
```

![](docs/example-latex-1.png){width=80%}

# Ahh! Command Line! Scary!

If you don't like/understand the command line, there are plenty of web or GUI
applications to do compilation for you:

-   Overleaf -- [overleaf.com](https://www.overleaf.com/)
-   TeXWorks -- [tug.org/texworks](https://www.tug.org/texworks/)
-   Papeeria -- [papeeria.com](https://papeeria.com/landing)
-   Kile -- [kile.sourceforge.io](https://kile.sourceforge.io/)


# Increasing Complexity

Here's a slightly more complicated example:

```{.latex include=docs/example-twocolumn.tex}
```

```bash
tree --dirsfirst --charset=ascii -n docs
.
|-- example-twocolumn.tex
`-- xkcd-file-ext.png
```

----

```{bash, results = 'hide'}
cd docs
xelatex example-twocolumn.tex   # produces example-twocolumn.tex
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-twocolumn.pdf" "example-twocolumn" -png
```

![](docs/example-twocolumn-1.png){width=60%}


# Citations with BibTeX

BibTeX is a citation data format useful for generating automatic citations

-   Many, many different citation types (full list
    [bibtex.com/e/entry-types](https://www.bibtex.com/e/entry-types))
-   Use any bibliography style (with a `.csl` file, which is XML)

## Citation Databases/Files

Citations can be kept in a file with extension `.bib`

-   List of citation items with properties
-   Properties separated by commas
-   Strings wrapped in curly braces (`{}`)
    -   Maintain preformatted capitalization with nested `{}`

----

Some citations from my statistics midterm project:

```{.bib include=docs/example-bib.bib}
```


# Citing in LaTeX with BibLaTeX

Citations can be autogenerated with the `biblatex` package:

```{.latex include=docs/example-bib.tex}
```

----

```{bash, results = 'hide'}
cd docs
xelatex example-bib.tex       # Initial run to create `.bcf` with citations from `.bib`
biber example-bib             # Generate `.bbl` citation file
xelatex example-bib.tex       # Use `.bbl` file in LaTeX
xelatex example-bib.tex       # Rerun to resolve cross references
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-bib.pdf" "example-bib" -png
```

![](docs/example-bib-1.png){width=80%}


# MLA with BibLaTeX

MLA citations can be generated using the `style=mla` option:

```{.latex include=docs/example-bib-mla.tex}
```

----

```{bash, echo = FALSE}
cd docs
cp example-bib.bib example-bib-mla.bib
```

```{bash, results = 'hide'}
cd docs
xelatex example-bib-mla.tex
biber example-bib-mla
xelatex example-bib-mla.tex
xelatex example-bib-mla.tex
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-bib-mla.pdf" "example-bib-mla" -png
```

![](docs/example-bib-mla-1.png){width=80%}


# Toning Down the Complexity

Sometimes you might not need that much control or complexity

-   Too many commands
-   Document setup is too complicated
-   Only need basic document or predefined document templates


# Markdown

A simple markup language for writing documents that require simple formatting

-   Used almost universally in README files
    -   GitHub has its own flavor: GitHub-Flavored Markdown
-   Comes in many different flavors; depends on the parser
-   Many parsers to transform markdown into HTML, PDF, DVI, etc.


## Example

Very basic syntax that should be unviersal across most markdown processors

```{.markdown include=docs/example-markdown.md}
```

Things like tables usually differ across processors; some support, some don't,
syntax might be different


# Rendering

There are many, many implementations of markdown, mostly targeting HTML:

-   **Markdown.pl**: the original, not updated since 2004 --
    [daringfireball.net/projects/markdown](https://daringfireball.net/projects/markdown/syntax)
-   **CommonMark**: an attempt at a standard --
    [commonmark.org](https://commonmark.org/)
-   **PHP Markdown**: PHP port of the original --
    [github.com/michelf/php-markdown](https://github.com/michelf/php-markdown)
-   **Marked**: Javascript implementation --
    [marked.js.org](https://marked.js.org/)
-   **MultiMarkdown**: another implementation --
    [fletcher.github.io/MultiMarkdown-6](https://fletcher.github.io/MultiMarkdown-6/)
-   Python-Markdown, Maraku, kramdown, Parsedown, showdown, etc

Check differences with Babelmark:
[johnmacfarlane.net/babelmark2](https://johnmacfarlane.net/babelmark2/)


# Pandoc

Pandoc ([pandoc.org](https://pandoc.org/)) is a universal markup converter

-   Convert to and from tons of markup formats (see
    [conversion diagram](https://pandoc.org/diagram.jpg))
-   Has its own markdown flavor


# Using Pandoc

We can use Pandoc to convert our markdown into HTML:

```{bash, results = 'hide'}
cd docs
pandoc -s example-markdown.md -o example-markdown.html
```


# Converting to TeX

We can convert it to TeX and perhaps modify it before using `pdflatex` or
`xelatex`:

```{bash, results = 'hide'}
cd docs
pandoc example-markdown.md -o example-markdown.tex
```

```{.tex include=docs/example-markdown.tex}
```


# Converting to PDF

We can convert it to PDF:

-   Markdown is first converted to TeX
-   `pdflatex`, by default, converts to TeX to PDF

----

```{bash, results = 'hide'}
cd docs
pandoc example-markdown.md -o example-markdown.pdf
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-markdown.pdf" "example-markdown" -png
```

![](docs/example-markdown-1.png){width=65%}


# Passing Arguments to Pandoc

Pandoc can read in many properties to customize the output

The simplest way is to pass them in as command line arguments:

```bash
# Use xelatex instead of pdflatex
pandoc example-markdown.md -o example-markdown.pdf --pdf-engine=xelatex
# Table of contents, numbered sections, code highlighting color scheme
pandoc example-markdown.md -o example-markdown.pdf --toc --number-sections --highlight-style=pygments
```


# Pandoc Markdown

Pandoc has its own flavor of markdown that greatly expands on upon basic syntax

-   Optionally enable and disable features when compiling

## YAML Header

A header block of YAML can set properties for the file instead of passing them
as command line arguments; for example:

-   PDF engine (`pdflatex`, `xelatex`, `lualatex`, etc.)
-   Template file to use
-   Table of contents and depth
-   Bibliography files and options
-   Math rendering method
-   ...

There are many variables specific to certain types of outputs. See Pandoc
documentation for full list.

For TeX:

-   Page geometry (`geometry`)
-   Document class (`documentclass`)
-   Paper size (`papersize`)
-   Font style (`fontsize`, `mainfont`, `CJKmainfont`, etc.)
-   ...

## Code Blocks

Delimit code blocks with triple backticks (\`\`\`):

````markdown

``` python
print("This is a code block with syntax highlighting")
```

````

We can also use tildes and give properties:

-   Block identifier with `#identifier`
-   Assign classes to use when rendering (`.classname`)
    -   Many built in classes for specific highlighting of languages
    -   `.numberLines` to show line numbers on the left

```markdown

~~~{#some-rust-code .rust .numberLines}
fn Parse(val: Option<String>) -> String {
  match val {
    Some(v) -> v,
    None -> String::new()
  }
}
~~~

```

## Tables

There are many different syntaxes that can be used to create tables

Pulled straight from Pandoc's documentation:

```markdown

  Right     Left     Center     Default
-------     ------ ----------   -------
     12     12        12            12
    123     123       123          123
      1     1          1             1

Table:  Demonstration of simple table syntax.

```

Using pipe syntax:

```markdown

| Right | Left | Default | Center |
|------:|:-----|---------|:------:|
|   12  |  12  |    12   |    12  |
|  123  |  123 |   123   |   123  |
|    1  |    1 |     1   |     1  |

  : Demonstration of pipe table syntax.

```

## Block Quotations

```markdown

> insert a block quotation like this. This paragraph has two lines.
>
> 1.  A list item inside the block quote
> 2.  Another item
>
> > Nested block quotation

```


# Here's an Example

```{.markdown include=docs/example-markdown-pandoc.md}
```

----

```{bash, results = 'hide'}
cd docs
pandoc example-markdown-pandoc.md -o example-markdown-pandoc.pdf
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-markdown-pandoc.pdf" "example-markdown-pandoc" -png
```

![](docs/example-markdown-pandoc-1.png){width=65%}


# Citations in Pandoc Markdown

Citation generation requires `pandoc-citeproc`, an external filter

-   Specify bibliography (`.bib`) files with `bibliography` in the header
-   Optionally, specify citation style with `csl`
    -   Lots of CSLs in the Zotero Style Repository --
        [zotero.org/styles](https://www.zotero.org/styles)
-   Optionally, specify other citations with `references`
-   Square brackets to cite something

----

```{.markdown include=docs/example-markdown-pandoc-bib.md}
```

```bash
tree --dirsfirst --charset=ascii -n docs
.
|-- example-markdown-pandoc-bib.md
|-- example-bib.bib
`-- modern-language-association.csl
```

----

```{bash, results = 'hide'}
cd docs
pandoc --filter pandoc-citeproc -o example-markdown-pandoc-bib.pdf example-markdown-pandoc-bib.md
```

```{bash, echo = FALSE}
cd docs
pdftoppm "example-markdown-pandoc-bib.pdf" "example-markdown-pandoc-bib" -png
```

![](docs/example-markdown-pandoc-bib-1.png){width=75%}


# One Step in Another Direction: R

R is programming language for statistical computing

-   Used widely by statisticians, data analysts, etc.
-   Interpreted and dynamically typed language


# Installing R

Download R from the homepage of The R Project for Statistical Computing
-- [r-project.org](https://www.r-project.org/)

-   Packages available for most Linux distributions
-   Install on Homebrew: `brew install r`
-   Install on Chocolatey: `choco install r`

Install R packages from the CRAN (Comprehensive R Archive Network)


# R Session

`R` starts a basic R session

Some graphical R environments:

-   RStudio -- [rstudio.com](https://rstudio.com/)
-   R plugin for Intellij IDEA --
    [plugins.jetbrains.com/plugin/6632-r-language-for-intellij](https://plugins.jetbrains.com/plugin/6632-r-language-for-intellij)
-   Eclipse StatET --
    [projects.eclipse.org/projects/science.statet](https://projects.eclipse.org/projects/science.statet)


# Some R Basics

```{r, cache = TRUE, cache.path = '../cache/'}
1 + 1
```
